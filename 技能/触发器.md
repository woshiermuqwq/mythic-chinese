技能触发器
==============

技能触发器用于决定技能如何激活.

<u>**触发器无法被写进技能组内(存放于Skills文件夹内的文档内).**</u>只能被写于实体配置内.

**可用触发器列表:**

1tick=0.05秒

| 触发器                | 描述                                     |
|-----------------------|------------------------------------------|
| onCombat              | 默认                                     |
| onAttack              | 造成伤害后                               |
| onDamaged             | 受到伤害后                               |
| onSpawn               | 生成后                                   |
| onDespawn             | 消失后                                   |
| onFirstSpawn          | 第一次由生成点(定点生成)生成后           |
| onDeath               | 死亡后                                   |
| onTimer:10            | 每10tick执行1次(10可修改)                |
| onInteract            | 被右键后                                 |
| onKillPlayer          | 杀死玩家后                               |
| onPlayerDeath         | 死亡后(施法者为玩家)                     |
| onEnterCombat         | 进入战斗后(需开启[威胁度](/实体/威胁度)) |
| onDropCombat          | 结束战斗后(需开启[威胁度](/实体/威胁度)  |
| onChangeTarget        | 变更目标后(需开启[威胁度](/实体/威胁度)) |
| onExplode             | 爆炸后                                   |
| onTeleport            | 传送后                                   |
| onSignal              | 收到信号后                               |
| onSignal:*信号名*     | 收到指定信号后                           |
| onShoot               | 发射后                                   |

**MythicCrucible** 新增触发器:**

| 触发器                | 描述                                     |
|-----------------------|-------------------------------------------------------------|
| onBlockBreak          | 破坏方块后                              |
| onBlockPlace          | 放置方块后                              |
| onConsume             | 消耗物品后(药水、食物等)     |
| onCrouch              | 蹲下后                                   |
| onUnCrouch            | 蹲起后                             |
| onDamaged             | 受伤后                                  |
| onDeath               | 死亡后                                        |
| onEquip               | 穿戴后                        |
| onUnEquip             | 脱下后                      |
| onInteract            | 被右键后                    |
| onBowHit              | 箭命中后                  |
| onPotionSplash        | 掷出药水瓶后           |
| onRightClick          | 右键后                                |
| onShoot               | 射箭后                                |
| onSpawn               | 重生后                        |
| onSwing               | 左键后                                 |
| onTimer:\#            | 每#ticks激活一次            |
| onUse                 | 右键实体/方块后        |
| onFish                | 手持鱼竿右键后    |
| onFishBite            | 鱼准备上钩后               |
| onFishCatch           | 鱼上钩后      |
| onFishGrab            | 钩中实体鱼后 |
| onFishGround          | 鱼钩被抛在地面后                      |
| onFishingReel         | 收钩无鱼后 |
| onFishingFail         | 有鱼准备上钩却提前收钩后|
| onPressQ              | 按下Q后(需ProtocolLib) |
| onPressCtrlQ          | 按下Ctrl+Q后(需ProtocolLib) |
| onPressF              | 按下F后(需ProtocolLib) |

MythicCrucible是一个付费插件,购买入口->[点我](https://mythiccraft.io/index.php?resources/crucible-create-unbelievable-mythic-items.2/)!

Using Triggers
--------------

Triggers are defined in the skill section of the mob configuration and
must use tilda (~) in front of them. In the case of the Timer, a time
in ticks is also required.

    SkeletalWizard_Fire:
      Type: WITHER_SKELETON
      Display: '&Skeletal Fire Wizard'
      Health: 50
      Damage: 0.5
      Skills:
      - ignite{ticks=100} @target ~onAttack
      - skill{s=FireShield} @trigger ~onDamaged 0.1
      - skill{s=AOEFire} ~onTimer:300

In this example the mob will also set its target on fire when
melee-attacking, will use a "FireShield" skill when taking damage, and
will use the "AOEFire" skill every 300 ticks [1].

Not using Triggers...
---------------------

Skill triggers give far more flexibility in determining exactly when a
skill should go off. It is **highly** recommended that you trigger all
your skills using advanced triggers as opposed to the old, legacy
methods.

If a skill does not have a trigger, it will default to the "~onCombat"
trigger (shown further below) which will execute when these four basic
things occur:

-   The mob takes damage
-   The mob deals damage
-   The mob spawns
-   The mob dies

<!-- -->

    SkeletalWarrior:
      Mobtype: skeleton
      Display: '&9A Skeletal Warrior'
      Health: 100
      Damage: 2
      Drops:
      - DropTable
      Skills:
      - skill{s=Bash} =10%-90%

In this instance the Bash skill is triggered when the mob deals or takes
damage when it is between 10% and 90% health.

The @trigger Targeter
---------------------

You may have noticed there is an @trigger targeter in the examples
above, and listed in the targeters section. The @trigger will target the
"cause" of the skill being set off, i.e. if a player damages a mob and
that mob uses an onDamage-triggered skill, it will target that player.
If a signal is being sent to a mob, it will target the mob that has sent
the signal, and so on.

Detailed Descriptions & Examples
--------------------------------

**~onSpawn**

-    Trigger the skill to execute when the mob spawns.
-    This will only occur once.
-    Can be used along with the chance parameters to make the chance to
    execute less than 100%
-    **- skill{s=DamageImmunity} ~onSpawn 0.50** (The mob has a 50%
    chance to use a DamageImmunity skill when it spawns)

**~onDeath**

-    Trigger the skill to execute when the mob dies.
-    This will only occur once.
-    Can be used along with the chance parameters to make the chance to
    execute less than 100%
-    **- skill{s=SpawnSpiderlings} ~onDeath 1** (The mob has a 100%
    chance to use a SpawnSpiderlings spell when it dies)

**~onAttack**

-    Trigger the skill to execute when the mob attacks.
-    This will occur anytime the mob attacks something.
-    Can be used along with the health and chance parameters to further
    define when this occurs.
-    **- skill{s=Bash} ~onAttack &lt;50% 0.1** (The mob has a 10%
    chance to use the Bash skill when it attacks and has less than 50%
    health)

**~onDamaged**

-    Trigger the skill to execute when the mob takes damage.
-    This will occur anytime the mob takes damage.
-    Can be used along with the health and chance parameters to further
    define when this occurs.
-    **- skill{s=FlameShield} ~onDamaged 1** (The mob has a 100% chance
    to use the FlameShield skill when it takes damage)

**~onExplode**

-    Trigger the skill to execute when the mob explodes.
-    This will generally occur only once unless you have the
    PreventSuicide option set. Generally only works with creepers, since
    other mobs tend to not explode...
-    Can be used along with the chance parameters to make the chance to
    execute less than 100%
-    **- skill{s=SpawnCreeper} ~onExplode 0.25** (The mob has a 25%
    chance to use the SpawnCreeper skill when it explodes)

**~onTeleport**

-    Trigger the skill to execute when the mob teleports.
-    Generally only used for Endermen or mobs that have skills that
    allow them to teleport.
-    Can be used along with the health and chance parameters to further
    define when this occurs.
-    **- skill{s=GustOfWind} ~onTeleport &lt;50% 1** (The mob has a
    100% chance to use a GustOfWind spell when it teleports if it has
    less than 50% health)

**~onTimer:&lt;ticks&gt;**

-    Trigger the skill to execute based on a timer.
-    The timer is in ticks so 20 ticks equates to 1 second.
-    Avoid using with health or chance parameters as it does not work
    well with these at the moment.
-    Care must be taken when using the Timer trigger as skills that are
    not properly designed can potentially lead to server or client side
    performance issues. Skills with particularly low timers that call
    complex syntax can cause server side performance issues, while large
    count particle effects and other graphic intensive things can lead
    to potential client side performance issues.
-    **- skill{s=SingleTargetFire} ~onTimer:200** (The mob will use the
    SingleTargetFire skill every 10 seconds)

**~onPlayerKill**

-    Trigger the skill to execute when the mob kills a player character.
-    Can be used along with the health and chance parameters to further
    define when this occurs.
-    **- skill{s=BossRegen} ~onPlayerKill &gt;0 1** (The mob has a 100%
    chance to use the BossRegen spell when it kills a player)

**~onEnterCombat**

-    Trigger the skill to execute when the mob enters combat.
-    **- skill{s=BuffSelf} ~onEnterCombat &gt;0 1** (The mob has a 100%
    chance to use the BuffSelf skill when it enters combat with a player
    or mob)

**~onDropCombat**

-    Trigger the skill to execute when the mob drops combat.
-    **- skill{s=BossRegen} ~onDropCombat &gt;0 1** (The mob has a 100%
    chance to use the BossRegen skill when it drops combat with a player
    or mob)

**~onChangeTarget**

-    Trigger the skill to execute when the mob changes target.
-    **- skill{s=Charge} ~onChangeTarget &gt;0 1** (The mob has a 100%
    chance to use the Charge skill when it changes targets)

**~onInteract**

-    Trigger the skill to execute when the player interacts with them
    (right-clicks on them).
-    **- skill{s=QuestDialogue} ~onInteract &gt;0 1** (The mob has a
    100% chance to use the QuestDialogue skill when the player interacts
    or right-click on it)

**~onSignal** or **~onSignal:[signal]**

-   Trigger for skill to execute when the mob receives a signal or when
    with :[signal] only a specific signal
-   Useful for skills that require communication between mobs or from a
    player to a mob [2], which was previously (pre 2.3) only possible by
    workarounds
-   See
    [signal-skill](http://www.mythicmobs.net/manual/doku.php/skills/mechanics/signal)
    page.

**~onShoot**

-    Trigger the skill to execute when the mob fires a projectile
    (Ghast/Blaze Fireballs).
-    **- skill{s=ExplodeParticles} ~onShoot &gt;0 1** (The mob has a
    100% chance to use the ExplodeParticles skill when it fires a
    projectile)

[1] 20 ticks = 1 second

[2] players can communicate signals to mobs by using the
mythicmobs-command /mm signal &lt;uuid&gt; &lt;signal&gt;