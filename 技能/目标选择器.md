目标选择器
=========

目标选择器决定技能作用于什么,可以是实体、位置 乃至一个区域内的方块坐标.  

**一行技能只能有一个目标选择器**  

技能组内目标不填写目标选择器时,目标选择器将为实体文档内该技能组所处行的目标选择器.  

技能组被另一个技能组（父技能组）激活时, 该技能组内未填写目标选择器的技能行的目标选择器  
将为 父技能组内用于激活该技能组的技能行 所写的目标选择器

实体配置内的技能行无目标选择器时, 默认使用 \@none（绝大多数技能）

\@Trigger所选取的目标是激活触发器的人,如触发器~onDamaged  
会让实体受伤后选择攻击者为技能目标,而不是自身当前的目标为技能目标.

部分目标选择器支持[占位符](占位符)(如\@EIR、\@PIR)

实体目标选择器
----------------

### 单实体

| 名称 | 缩写 | 注释 |
| ---- | ---- | ---- |
| \@Self | \@caster, \@boss, \@mob | 选取施法者自身 |
| \@Target | \@T | 选取自身的当前目标（并非技能目标） |
| \@Trigger | | 选取激活触发器的实体 |
| \@NearestPlayer{r=#} | | 以自身为中心<br>选取指定半径<br>球体范围内离自己最近的玩家,半径默认为5格方块(r=5) |
| \@WolfOwner | | 狼的主人 |
| \@Owner | | 施法者的主人 |
| \@Mount | \@Vehicle(4.12) | 施法者的坐骑 |
| \@Parent | \@Summoner | 选取父系实体（搭配Summon） |
| \@Children | \@Child, \@Summons | 选取子系实体（搭配Summon） |
| \@Passenger | \@Rider | 选取施法者的骑乘者 |
| \@PlayerByName{name="Ashijin"}（4.12） | \@SpecificPlayer | 选取名称为指定字符串的玩家,支持变量 |
| \@UniqueIdentifier{u="<target.uuid>"}（4.13） | \@UUID | UUID为指定字符串的实体,支持变量 |

### 多实体

| 名称 | 缩写 | 注释 |
| ---- | ---- | ---- |
| \@ElayersInRing{min=最小半径;max=最大半径} | \@ERing | 选取以指定最小半径为内环半径<br>指定最大半径为外环半径<br>所形成圆环内的全部实体 |
| \@EntitiesNearOrigin{r=半径} | \@LivingNarOrigin{r=5} / \@EIO{r=5} / \@ENO{r=5}| 以坐标原点为中心<br>选取指定半径<br>球体范围内的所有实体 |
| \@ItemsInRadius{radius=5}（4.13） | \@IIR{r=半径} | 以施法者为中心<br>选取指定半径<br>球体范围内的所有掉落物 |
| \@ItemsNearOrigin{radius=5}（4.13） | \@IIO{r=半径} / \@INO{r=半径}| 以坐标原点为中心<br>选取指定半径<br>球体范围内的所有实体 |
| \@LivingInCone{a=弧度;r=母线长度;rot=圆锥体的母线起始角度} | \@EIC{a=90;r=16;rot=0.0}, EntitiesInCone, LEIC | 选取位于指定弧度<br>指定半径、指定母线起始角度<br>顶点垂直偏移为0.0格方块<br>所形成的圆锥体范围内的所有实体 |
| \@LivingInWorld | \@LivingEntitiesInWorld<br>\@EntitiesInWorld<br>\@AllInWorld<br><br>\@EIW | 选取所处世界的全部实体 |
| \@LivingEntitiesInRadius{r=半径} | \@LivingEntitiesInRadius<br>\@EntitiesInRadius<br>\@AllInRadius<br>\@EIR | 以自身为中心<br>选取指定半径<br>球体范围内的全部实体(包括创造/观察模式玩家) |
| \@MobsNearOrigin{r=#;t=种类,种类,种类} | \@MobsNearSource | 以坐标原点为中心<br>选取指定半径<br>球体范围内的所有生物(可不指定 可为MythicMobs实体) |
| \@NonInRadius{radius=5}（4.14.0） | \@NotLivingInRadius<br>\@NLEIR<br>\@NonLivingEntitiesInRadius<br>\@NotLivingEntitiesInRadius | 以施法者为中心<br>选取指定半径<br>球体范围内的特殊实体（船、箭矢等）|
| \@NotLivingNearOrigin{radius=5}（4.14.0） | \@NLNO<br>\@NonLivingNearOrigin | 以施法者为中心<br>选取指定半径<br>球体范围内的特殊实体（船、箭矢等）|
| \@PlayersInRadius{r=半径} | \@PIR{r=半径} | 以自身为中心<br>选取指定半径<br>球体范围内的全部玩家<br>不选取创造观察模式玩家<br>从4.13开始支持变量与占位符 |
| \@MobsInRadius{r=半径;types=种类,种类,种类} | \@Mobs{r=半径;t=种类,种类,种类}<br>\@MIR | 选取指定半径<br>球体范围内所有的指定实体<br>可不指定实体<br>可为MythicMobs实体 |
| \@PlayersInWorld | \@World | 选取所处世界的全部玩家 |
| \@PlayersOnServer | \@Server | 选取服务器内的全部玩家 |
| \@PlayersInRing{min=最小半径;max=最大半径} | \@PRing | 选取以指定最小半径为内环半径<br>指定最大半径为外环半径<br>所形成圆环内的全部玩家 |
| \@PlayersNearOrigin{r=半径} |  \@PlayersNearSource | 以坐标原点为中心<br>选取指定半径<br>球体范围内的所有玩家<br>父系技能目标选择器必须为坐标类选择器 |
| \@PlayersNearTargetLocation{r=半径} | \@PNTL{r=半径} | 以技能目标位置为中心<br>选取指定半径<br>球体范围内的所有玩家<br>父系技能目标选择器必须为坐标类选择器 |
| \@Siblings | \@Sibling<br>\@Brothers<br>\@Sisters | 选取目标的近亲(如骷髅与流浪者) |

### 威胁度

需要开启[威胁度](/实体/威胁度)

| 名称 | 缩写 | 注释 |
| ---- | ---- | ---- |
| \@RandomThreatTarget | \@ThreatTableRandomTarget<br>\@RTT | 随机选取一个拥有威胁度的实体 |
| \@ThreatTable | \@ThreatTargets<br>\@TT | 选取所有拥有威胁度的实体 |
| \@ThreatTablePlayers | \@PlayersInThreatTable<br>\@TTP | 选取所有拥有威胁度的玩家 |
| \@RTTL | | 随机选取一个拥有威胁度的实体的位置 |

坐标目标选择器
------------------

### 单坐标

| 名称 | 缩写 | 注释 |
| ---- | ---- | ---- |
| \@SelfLocation{x=0.0;y=0.0;z=0.0;forwardoffset=0.0;sideoffset=0.0} | \@CasterLocation<br>\@BossLocation<br>\@MobLocation | 选取 自身位置且垂直偏移0.0格方块 |
| \@SelfEyeLocation{length=5}（4.13） | \@eyeDirection<br>\@casterEyeLocation<br>\@BossEyeLocation<br> \@mobEyeLocation | 选取施法者视角正前方第5格方块位置 |
| \@Forward{forward(f, amount, a)=5;yoffset(y)=0.0;sideOffset=0.0;rotation=0.0;useeyedirection(uel)=false} | | 选取 当前朝向 正前方第5格方块位置且垂直偏移0.0格方块<br>左右偏移0.0格位置的方块<br>且不以视角方向为选择基准 |
| \@ForwardWall{forward(f, amount, a)=5;yoffset(y)=0.0;height(h)=3;width(w)=1}（4.13） | | 选取 当前朝向 正前方第5格方块位置且垂直偏移0.0格方块<br>左右偏移0.0格位置<br>指定高度/宽度的一面墙 |
| \@TargetLocation | \@Targetloc<br>\@TL | 选取当前目标的位置 |
| \@TriggerLocation | | 选取触发者的位置 |t |
| \@Location{c=X轴坐标,Y轴坐标,Z轴坐标,俯仰视角度,水平视角角度} | \@Loc, \@L | 选取指定坐标位置 |
| \@Origin{xoffset=0;yoffset=0;zoffset=0} | \@Source | 选取坐标原点<br>详细信息->[[1]](技能/目标选择器/Origin) |
| \@Spawners{s=字符} | | 选取指定生成点(可多个)<br>使用g:组名 以选取一整个组<br>也可以使用 Spawner* 以选取 Spawner1,Spawner2,Spawner3等) |
| \@ObstructingBlock（4.13） | | 选取与技能目标之间路径上的所有方块 |
| \@NearestStructure（4.13） | | 选取离自身最近的结构（地牢等）的中心位置 |
| \@CasterSpawnLocation（4.13） | \@casterspawn | 选取施法者的出生点 |
| \@SpawnLocation（4.13） | | 选取所处世界的世界重生点 |

### 多坐标

| 名称 | 缩写 | 注释 |
| ---- | ---- | ---- |
| \@PlayerLocationsInRadius{r=半径} | \@PLIR{r=#}<br>\@PLR<br>\@LocationRadius | 以自身位置为中心<br>选取指定半径 球体范围内的所有玩家 |
| \@Ring{radius=半径;points=点数;yoffset=0.0;rotationx=0;rotationy=0;rotationz=0;offsetx=0;offsety=0;offsetz=0} | | 以坐标原点为中心<br>在以指定半径所形成的环上<br>规则地选取指定数量的坐标点作为技能目标 （从4.13开始支持变量与占位符） |
| \@RingAroundOrigin{radius=半径;points=点数;yoffset=0.0;rotationx=0;rotationy=0;rotationz=0;offsetx=0;offsety=0;offsetz=0} | \@RingOrigin<br>\@RAO | 以自身为中心<br>在以指定半径所形成的环上<br>规则地选取指定数量的坐标点作为技能目标 （4.14.0） |
| \@Sphere{radius=半径;points=点数;yoffset=0.0} | | 以自身为中心<br>在以取指定半径形成的球体最外层上<br>规则地选取指定数量的坐标点作为技能目标 （从4.13开始支持变量与占位符） |
| \@Cone{angle=90;points=点数;range=2;rotation=10;yoffset=0.0} | | 随机选取位于<br>弧度为180, 半径为2<br>母线起始角度为10<br>顶点垂直偏移为0.0格方块<br>所形成的圆锥体范围内<br>指定数量的坐标点作为技能目标 |
| \@EntitiesInCone{angle=角度;range=母线长度;rotation=圆锥体的母线起始角度} | | 选取位于指定角度<br>指定母线长度<br>指定圆锥体母线起始角度<br>所形成圆锥体范围内的所有实体 |
| \@LocationsOfTargets | \@LOT | 以父系技能目标选择器<br>所选取的实体的位置为目标 |
| \@BlocksInRadius{radius=#;radiusy=#;noise=#;shape=选取范围的形状, 默认sphere sphere/cube;onlyair=是否仅选取空气false;noair=true}（4.13） | | 以自身为中心<br>取指定半径<br>球体范围内的所有方块 |
| \@BlocksNearOrigin{radius=#;radiusy=#;noise=#;shape=选取范围的形状<br>默认sphere sphere/cube;onlyair=是否仅选取空气false;noair=true} | | 以坐标原点为中心<br>选取指定半径<br>球体范围内的所有方块的位置 |


特殊目标选择器
-----------------

| 名称 | 缩写 | 注释 |
| ---- | ---- | ---- |
| \@None | \@Console | 无 |

技能目标选择器（必须被写在元技能内）:
----------------

```yml
Laser:
  Type: creeper
  Display: 'Laser'
  Health: 12
  AITargetSelectors:
  - 0 clear
  - 1 players
  Skills:
  - skill{s=Laser} @target
 Laser:
  Skills:
  - ignite @targetedtarget
```

点燃自身与目标最短路线上的所有实体

| 名称 | 缩写 | 注释 |
| ---- | ---- | ---- |
| \@Line{radius=半径;fromorigin=true/false} | \@Line{r=半径;fo=true/false} | 选取自身与技能目标最短路线上的所有实体 |
| \@EntitiesInLine{r=半径;fo=true/false} | \@EIL{r=半径;fo=true/false} | 选取自身与技能目标最短路线上的所有实体,包括施法者 |
| \@LivingNearTargetLocation{radius=5} | \@LivingEntitiesNearTargetLocation<br>\@LNTL{r=半径} | 以技能目标为中心<br>选取指定半径<br>球体范围内的全部实体<br>父系技能目标选择器必须为坐标类选择器 |
| \@PlayersNearTargetLocation{radius=5} | \@PNTL{r=半径} | 以技能目标为中心<br>选取指定半径<br>球体范围内的全部玩家<br>父系技能目标选择器必须为坐标类选择器 |
| \@RLNT{amount=选取点数;maxradius=最大半径;spacing=每点间隔;minradius=最小半径} | \@RandomLocationsNearTarget{a=5;r=5;s=0;minr=0}<br>\@RandomLocationsNearTargetEntities<br>\@RandomLocationsNearTargetLocations<br>\@RandomLocationsNearTargets<br>\@RLNTE/\@RLNTL | 以技能目标为中心<br>随机选取以指定半径所形成的球体范围内<br>指定数量的坐标点<br>作为技能目标 |
| \@RLNO{amount=选取点数;maxradius=最大半径;spacing=每点间隔;minradius=最小半径} | \@RandomLocationsNearOrigin{a=5;r=5;s=0;minr=0}<br>\@RandomLocationsOrigin<<br>\@RLO | 以坐标原点为中心<br>随机选取以指定半径所形成的球体范围内<br>指定数量的坐标点<br>作为技能目标 |
| \@RLNC{amount=选取点数;maxradius=最大半径;spacing=每点间隔;minradius=最小半径} | \@RandomLocationsNearCaster{a=5;r=5;s=0;minr=0}<br>\@RandomLocations | 以施法者为中心<br>随机选取以指定半径所形成的球体范围内<br>指定数量的坐标点<br>作为技能目标 |
| \@TargetedLocation{x=0.0;y=0.0;z=0.0} | \@targetedLocations | 选取已被父系技能的目标选择器<br>所选取的实体的位置（4.12） |
| \@TargetedTarget（4.13） | \@Targeted | 选取已被父系技能的目标选择器<br>所选取的实体 |
| \@FloorOfTargets（4.13） | \@FOT | 以技能目标脚下的方块为技能目标 |
| \@ProjectileForward{forward(f)=5;rotate(rot)=0;sideoffset=0}(5.0) | | 选取 抛射物当前朝向 正前方第5格方块位置且垂直偏移0.0格方块, 不进行转向<br><br> |

目标选择器修改项
================

目标过滤器
--------------

目标过滤器将令目标选择器选择或忽视特定实体.

过滤器就是这俩选项(所有目标选择器都能用):

-   ignore=过滤器修改项可用值
-   target=过滤器修改项可用值

比如,要对半径10米内的所有 非动物与玩家的实体造成20点伤害

    d{a=20} @eir{r=10;ignore=players,animals}

对半径5米内的所有实体(不仅有玩家)释放ASkill:

    skill:ASkill @eir{r=5;target=players}

过滤器修改项可用值:

-   self 或 caster(自身)
-   armorstand 或 armor_stand(*盔甲架* 默认忽视)（4.14.0）
-   animals (*被动实体*)
-   creative (*创造模式玩家* 默认忽视)
-   creatures (*拥有AI的实体*)
-   flyingmobs(*可飞行实体*)
-   marker(*不可见低耗能实体* 默认忽视)（4.14.0）
-   monsters (*敌对实体*)
-   NPCs (*Citizens的NPC 默认忽视)*
-   players(*玩家*)
-   samefaction (*相同阵营实体*)
-   spectators (*处在观察者模式的玩家* 默认忽视)*
-   vanilla(*原版实体*)
-   villager(*村民*)
-   watermobs(*水下实体*)

特定实体选择器(Target)也能这么写
**target过滤器修改项可用值=true* 相当于target=值
如 **targetPlayers=false**  
但过滤器(ignore)却不行

目标数量限制器
-------------

所有实体目标选择器都支持数量限制器,支持选择顺序.

目标数量限制器写法:

-   limit=数量
-   sort=排列方式

距离自身近的优先,选取半径30格方块内的2名玩家:

-   **\@PlayersInRadius{r=30;limit=2;sort=NEAREST}**

目标数量限制器可用值:

-   NONE (无)
-   RANDOM (随机)
-   NEAREST (最近)
-   FURTHEST (最远)
-   HIGHEST_HEALTH (最高生命)
-   LOWEST_HEALTH (最低生命)
-   HIGHEST_THREAT (最高威胁度)
-   LOWEST_THREAT (最低威胁度)

目标选择间隔
-------

  逐步对目标选择器所选取的所有事物激活技能  
  每次激活间隔为 该选项的值.  
  换句话说, 范围目标选择器不再一次性选取所有事物