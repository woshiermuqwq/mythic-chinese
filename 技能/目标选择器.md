目标选择器
=========

目标选择器决定技能作用于什么,可以是实体、位置 乃至一个区域内的方块坐标.

技能组内目标不填写目标选择器时,目标选择器将为实体文档内该技能组所处行的目标选择器.  

技能组被另一个技能组激活时, 该技能组内未填写目标选择器的技能行的目标选择器及TargetConditions检测对象为 用于激活该技能组的技能行 所写的目标选择器

实体配置内的技能行无目标选择器时, 默认使用 @self

目标类条件(TargetConditions)所检测的对象被目标选择器所影响（可以是方块）,如@self为检测自己,那样与Conditions无区别.

@Trigger所选取的目标是激活触发器的人,如触发器~onDamaged,会让实体受伤后选择攻击者为技能目标,而不是自身当前  
的目标为技能目标.

部分目标选择器支持[占位符](占位符)(如@EIR、@PIR)

实体目标选择器
----------------

### 单实体

| 目标选择器名                          | 缩写    | 注释                                              |
| ------------------------------------- | ------- | ------------------------------------------------- |
| @Self                                 | @Caster | 施法者自身                                        |
| @SelfEyeLocation{length=5} | @eyedirection | 选取施法者视角正前方第5格方块位置 |
| @Target                               | @T      | 自身的目标                                        |
| @Trigger                              |         | 激活触发器的实体                                  |
| @NearestPlayer{r=#}                   |         | 半径范围内离自己最近的玩家,半径默认为5格方块(r=5) |
| @WolfOwner                            |         | 狼的主人                                          |
| @Owner                                |         | 施法者的主人                                      |
| @Mount                                |         | 施法者的坐骑                                              |
| @Parent                               |         | 父系实体                                          |
| @Children                             |         | 子系实体                                          |
| @Passenger                            |         | 施法者的骑乘者                                    |
| @CasterSpawnLocation                  |         | 施法者的出生点                                      |
| @SpawnLocation                  |         | 所处世界的世界出生点                                      |
| @PlayerByName{name="Ashijin"}         |         | 名称为指定字符串的玩家,支持变量,新增于4.12        |
| @UniqueIdentifier{u="<target.uuid>"}  | @UUID   | UUID为指定字符串的实体,支持变量,新增于5.0         |
| @Vehicle                              |         | 施法者的坐骑,新增于4.12                           |

### 多实体

| 目标选择器名                          | 缩写    | 注释                                              |
|--------------------------------------|--------------------|----------------------------------------------------------------------------------------------------------|
| @TargetedTarget | @Targeted | 选取已被目标选择器所选取的实体 |
| @LivingInCone{a=90.0;r=16.0;rot=0.0} | @EIC{a=弧度;r=半径;rot=锥形的母线起始角度}             | 选取锥形区域内的所有实体,详细见下 |
| @LivingInWorld                       | @EIW               | 选取所处世界的全部实体                                                             |
| @LivingEntitiesInRadius{r=半径}         |                    | 选取指定半径 球体范围内的全部实体(包括创造/观察模式玩家) |
| @PlayersInRadius{r=半径}                | @PIR{r=半径}          | 选取指定半径 球体范围内的全部玩家(不包括创造/观察模式玩家) |
| @MobsInRadius{r=半径;types=种类,种类,种类}       | @MIR{r=半径;t=种类,种类,种类}  | 选取指定半径 球体范围内所有的指定实体(可不指定 可为MythicMobs实体) |
| @EntitiesInRadius{r=半径;types=种类,种类,种类}   | @EIR{r=半径;t=种类,种类,种类}  | 选取指定半径 球体范围内的全部实体 (包括创造/观察模式玩家) |
| @PlayersInWorld                      | @World             | 选取所处世界的全部玩家 |
| @PlayersOnServer                     | @Server            | 选取服务器内的全部玩家 |
| @PlayersInRing{min=最小半径;max=最大半径}          |                    | 选取圆环内的全部玩家 |
| @PlayersNearOrigin{r=半径}              |                    | 以坐标原点为中心,选取指定半径 球体范围内的所有玩家 |
| @MobsNearOrigin{r=#;t=种类,种类,种类}             |  | 以坐标原点为中心,选取指定半径 球体范围内的所有生物(可不指定 可为MythicMobs实体)                                                                                                         |
| @EntitiesNearOrigin{r=半径}             | @EIO{r=半径} / @ENO{r=半径}| 以坐标原点为中心,选取指定半径 球体范围内的所有实体 |
| @PlayersNearTargetLocation{r=半径}      | @PNTL{r=半径}         | 以技能目标位置为中心, 选取指定半径 球体范围内的所有玩家 |
| @Siblings   |     | 选取目标的近亲(如骷髅与流浪者) |
| @ItemsInRadius{r=半径} | | 以坐标原点为中心,选取半径范围内的所有掉落物 |
| @EntitiesNearOrigin{r=半径}             | @IIO{r=半径} / @INO{r=半径}| 以坐标原点为中心,选取指定半径 球体范围内的所有实体 |

### 威胁度

需要开启[威胁度](/实体/威胁度)

| 目标选择器名        | 缩写      | 注释                                                        |
| ------------------- | --------- | ----------------------------------------------------------- |
| @RandomThreatTarget | @RTT      | 随机选取一个拥有威胁度的实体 |
| @ThreatTable        | @TT       | 所有拥有威胁度的实体    |
| @ThreatTablePlayers |           | 所有拥有威胁度的玩家     |
| @RTTL               |           | 随机选取一个拥有威胁度的实体的位置 |

坐标目标选择器
------------------

### 单坐标

| 目标选择器名        | 缩写      | 注释 
|------------------------|-----------|-------------------------------------------------------------------------------------------------------------- |
| @SelfLocation{y=0.0}          |           | 自身位置且垂直偏移0.0格方块                                                                                                                                                                                                                                                                                                 |
| @Forward{f=5;y=0.0;sideOffset=0.0;rotation=0.0}    |           | 当前朝向 正前方第5格方块位置且垂直偏移0.0格方块, 左右偏移0.0格方块                                                                                                                                                                        |
| @ForwardWall | | 当前朝向正前方的墙 |
| @TargetLocation        | @targetloc, @TL       | 目标的位置                                                                                                                                                                                                                |
| @TriggerLocation       |           | 触发者的位置                                                                                                                                                                                        |
| @Location{c=X轴坐标,Y轴坐标,Z轴坐标,俯仰视角度,水平视角角度}     |           | 指定坐标位置                                                                                                                                                                                                  |
| @Origin{xoffset=0;yoffset=0;zoffset=0}     |           | 坐标原点,对于一些特殊类技能(如projectile)的onTick技能,坐标原点是抛射物本身,而不是施法者 |
| @Spawner{s=字符} |           | 指定生成点(可多个) 使用g:组名 以选取一整个组,也可以使用 Spawner* 以选取 Spawner1,Spawner2,Spawner3等)                        |
| @ObstructingBlock    |             | 选取与技能目标之间路径上的所有方块 |
| @NearestStructure | | 选取离自身最近的结构（地牢等）的中心位置 |

### 多坐标

| 目标选择器名        | 缩写      | 注释                                                        |
|-------------------------------------------------|-------------|--------------------------------------------------------------------------------------------------------------------------------------|
| @PlayerLocationsInRadius{r=半径}                  | @PLIR{r=#} | 以自身位置为中心,选取半径内的所有玩家                                                                                     |
| @Ring{radius=半径;points=点数;yoffset=0.0}              |             | 以点数形成一个图形,选取该图形                                                                                           |
| @Cone{angle=90;points=点数;range=2;rotation=10;yoffset=0.0} |  | 弧度为180,半径为2,起始角度为10,垂直偏移为0.0,扇形范围内的所有实体 |
| @EntitiesInCone{angle=角度;range=半径;rotation=起始点旋转角度;} |             | 选取扇形内的所有实体                                                                                                |

特殊目标选择器
-----------------

| 目标选择器名         | 缩写      | 注释                                                  |
|----------|-----------|-------------------------------------------------------------------|
| @None    |           | 无 |

只能存放于技能文档内的目标选择器:

    Laser:
      Mobtype: creeper
      Display: 'Laser'
      Health: 12
      AITargetSelectors:
      - 0 clear
      - 1 players
      Skills:
      - skill{s=Laser} @target
    Laser:
      Skills:
      - ignite @line{r=1}

点燃自身与目标最短路线上的所有实体

| 目标选择器名         | 缩写      | 注释                                                  |
|----------------------------------------|---------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| @Line{radius=半径;fromorigin=true/false} | @Line{r=半径;fo=true/false} | 选取自身与技能目标最短路线上的所有实体                                                                                                                                                                                                                                                                                                                                    |
| @EntitiesInLine{r=半径;fo=true/false}    | @EIL{r=半径;fo=true/false}  | 选取自身与技能目标最短路线上的所有实体,包括施法者                                                                                                                                                                                                                                                                                                                       |
| @LivingNearTargetLocation{radius=5}    | @LNTL{r=半径}               | Targets all living entities near meta-targeter location.                                                                                                                                                                                                                                                                                                                                      |
| @PlayersNearTargetLocation{radius=5}   | @LNTL{r=半径}               | Targets all players near meta-targeter location.                                                                                                                                                                                                                                                                                                                                              |
| @RLNTE{a=#;r=#;s=#;minr=最小半径}        |                           | 选取周围随机的坐标点作为目标 |
| @FloorOfTargets     | @FOT       | 以目标脚下的方块为目标 |
| @LocationsOfTargets | @LOT       | 以技能目标的位置为目标        |
| @BlocksInRadius{radius=#;radiusy=#;noise=#;shape=形状sphere/cube;onlyair=是否仅选取空气false;noair=true} |     | 选取半径范围内的所有方块 |
| @BlocksNearOrigin{radius=#;radiusy=#;noise=#;shape=形状sphere/cube;onlyair=是否仅选取空气false;noair=true} |     | 以目标为中心,选取半径范围内的所有方块 |

目标选择器修改项
================

目标过滤器
--------------

目标过滤器将令目标选择器选择或忽视特定实体.

过滤器就是这俩选项(所有目标选择器都能用):

-   ignore=过滤器修改项可用值
-   target=过滤器修改项可用值

比如,要对半径10米内的所有 非动物与玩家的实体造成20点伤害

    damage{a=20} @EntitiesInRadius{r=10;ignore=players,animals}

对半径5米内的所有实体(不仅有玩家)释放ASkill:

    skill{s=ASkill} @EntitiesInRadius{r=5;target=players}

过滤器修改项可用值:

-   self(自身)
-   animals *(被动实体)*
-   creative (*创造模式玩家* 默认忽视)
-   creatures *(拥有AI的实体)*
-   flyingmobs(可飞行实体)
-   monsters *(敌对实体)*
-   NPCs *(Citizens的NPC 默认忽视)*
-   players(玩家)
-   samefaction *(相同阵营实体)*
-   spectators *(观察玩家 默认忽视)*
-   vanilla(原版)
-   watermobs(水下实体)

特定实体选择器(Target)也能这么写
**target过滤器修改项可用值=true* 相当于target=值
如 **targetPlayers=false**  
但过滤器(ignore)却不行

目标数量限制器
-------------

所有实体目标选择器都支持数量限制器,支持选择顺序.

目标数量限制器写法:

-   limit=数量
-   sort=排列方式

距离自身近的优先,选取半径30格方块内的2名玩家:

-   **@PlayersInRadius{r=30;limit=2;sort=NEAREST}**

目标数量限制器可用值:

-   NONE (无)
-   RANDOM (随机)
-   NEAREST (最近)
-   FURTHEST (最远)
-   HIGHEST_HEALTH (最高生命)
-   LOWEST_HEALTH (最低生命)
-   HIGHEST_THREAT (最高威胁度)
-   LOWEST_THREAT (最低威胁度)